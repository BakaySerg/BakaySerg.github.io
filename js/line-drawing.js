function Scroller(options){this.svg=options.el;this.animationBounds={};this.animationBounds.top=options.startPoint||.5;this.animationBounds.bottom=options.endPoint||.5;this.animationBounds.containerBounds=this.svg.getBoundingClientRect();this.start=this.getPagePosition('top');this.end=this.getPagePosition('bottom');this.svgLength=this.svg.getTotalLength();this.svg.style.strokeDasharray=this.svgLength;this.animateLine();window.addEventListener('scroll',this.animateLine.bind(this))}
Scroller.prototype.getPagePosition=function(position){var distanceFromPageTop=document.body.getBoundingClientRect().top;var divPosition=this.animationBounds.containerBounds[position];var startPointInCurrentWindow=window.innerHeight*this.animationBounds[position];return divPosition-distanceFromPageTop-startPointInCurrentWindow};Scroller.prototype.animateLine=function(){this.currentVisiblePosition=window.pageYOffset;if(this.currentVisiblePosition<this.start){this.svg.style.strokeDashoffset=this.svgLength}
if(this.currentVisiblePosition>this.end){this.svg.style.strokeDashoffset='0px'}
if(this.currentVisiblePosition>this.start&&this.currentVisiblePosition<this.end){this.svg.style.strokeDashoffset=this.distanceRemaining()*this.pixelsPerVerticalScroll()+'px'}};Scroller.prototype.distanceRemaining=function(){return this.end-this.currentVisiblePosition};Scroller.prototype.pixelsPerVerticalScroll=function(){this.verticalDistance=this.end-this.start;return this.svgLength/this.verticalDistance};new Scroller({'el':document.getElementById('line'),'startPoint':.8,'endPoint':.5})